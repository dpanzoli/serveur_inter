<!DOCTYPE html>
<html>
<meta charset="utf-8"></meta>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.js"></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<script language="javascript">

$(document).ready(function() {
	
	$("#sendForm").submit(function(e) {
		e.preventDefault();
		$.ajax({
			type: 'GET',
			url: 'send.php',
			data: $(this).serialize(),
			dataType: 'json',
			success: function(result) {
				if (result.code == 0) {
					$('#sendForm .success').show();
					$('#sendForm .error').hide();
				} else {
					$('#sendForm .success').hide();
					$('#sendForm .error').show();
				}
			},
			error: function(jqXHR, textStatus, errorThrown) {
				$('#sendForm .success').hide();
				$('#sendForm .error').show();
			}
		});
	});
	
	
	$("#sendRetrieve").submit(function(e) {
		e.preventDefault();
		$.ajax({
			type: 'GET',
			url: 'retrieve.php',
			data: $(this).serialize(),
			dataType: 'json',
			success: function(result) {
				if (result.code == 0) {
					$('#userRetrieved').text(result.data.id_user);
					$('#scoreRetrieved').text(result.data.score);
					$('#sendRetrieve .success').show();
					$('#sendRetrieve .error').hide();
				} else {
					$('#sendRetrieve .success').hide();
					$('#sendRetrieve .error').show();
				}
			},
			error: function(jqXHR, textStatus, errorThrown) {
				console.log(errorThrown);
				$('#sendRetrieve .success').hide();
				$('#sendRetrieve .error').show();
			}
		});
	});

});

</script>
<style>
	.ui.container {
		padding: 10px;
		width: 500px;
	}
</style>
<body>

<div class="ui container">
	<h1>Envoi sur le serveur</h1>
	<form id="sendForm" class="ui form">
		<div class="six wide required field">
			<label>Identifiant</label>
			<input type="text" name="id_user" placeholder="Identifiant utilisateur" required value="panzoli">
		</div>
		<div class="six wide required field">
			<label>Score</label>
			<input type="text" name="score" placeholder="Score" required value="1">
		</div>
		<div class="ui success message">
			<p>Score sauvegardé.</p>
		</div>
		<div class="ui error message">
			<p>Erreur lors de l'envoi du score.</p>
		</div>
		<button class="ui button" type="submit">Envoyer</button>
	</form>
</div>

<div class="ui container">
	<h1>Récupération à partir du serveur</h1>
	<form id="sendRetrieve" class="ui form">
		<div class="six wide required field">
			<label>Identifiant</label>
			<input type="text" name="id_user" placeholder="Identifiant utilisateur" required value="panzoli">
		</div>
		<div class="ui success message">
			<p>Le score associé à l'utilisateur <b id="userRetrieved"></b> est <b id="scoreRetrieved"></b>.</p>
		</div>
		<div class="ui error message">
			<p>Erreur lors de la récupération du score.</p>
		</div>
		<button class="ui button" type="submit">Récupérer</button>
	</form>
</div>


</body>
</html>